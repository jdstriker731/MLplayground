(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{18:function(e,t,a){e.exports=a(48)},23:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(14),c=a.n(s),o=(a(23),a(3)),r=a(7),l=a(6),u=a(5),m=a(4),h=a(11),d=a.n(h),f=a(15),p=a(12),v=a(8),b=a(16),g=a.n(b);var w=function(e){return e.show&&i.a.createElement("div",{className:"creation-modal"},i.a.createElement(g.a,{type:"TailSpin",color:"#4287f5",height:"100",width:"100",top:"auto",bottom:"auto"}))};a(46);var E=function(e){var t=e.show,a=e.close,s=(e.children,Object(n.useState)([])),c=Object(v.a)(s,2),o=c[0],r=c[1],l=Object(n.useState)(""),u=Object(v.a)(l,2),m=u[0],h=u[1],b=Object(n.useState)(!1),g=Object(v.a)(b,2),E=g[0],j=g[1],O=Object(n.useState)(!1),y=Object(v.a)(O,2),N=y[0],k=y[1],C=Object(n.useState)(!1),M=Object(v.a)(C,2),S=M[0],D=M[1],x=Object(n.useState)(!1),z=Object(v.a)(x,2),I=z[0],U=z[1],W=function(e){return new Promise((function(t){return setTimeout(t,e)}))};function A(){r([]),h([]),j(!1),k(!1),U(!1),document.getElementById("input-dialog").reset(),a()}function B(){return(B=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(!0),e.next=3,W(4e3);case 3:D(!1),U(!0);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return t&&i.a.createElement("div",{className:"creation-modal"},i.a.createElement("section",{className:"modal-main"},i.a.createElement(w,{show:S}),i.a.createElement("form",{className:"input-dialog",id:"input-dialog",action:"/upload",method:"POST",enctype:"multipart/form-data"},i.a.createElement("input",{type:"text",className:"dataset-namer",id:"dataset-namer",name:"dataset-namer",placeholder:"Dataset name...",onChange:function(e){e.persist(),h(e.target.value),j(!0)}}),i.a.createElement("input",{type:"file",className:"file-upload-dialog",id:"file-upload-dialog",name:"file-upload-dialog",onChange:function(e){e.persist(),r([].concat(Object(p.a)(o),Object(p.a)(e.target.files))),k(!0)},disabled:!E,accept:".jpg, .jpeg, .png",multiple:!0}),i.a.createElement("label",{className:"file-label",htmlFor:"file-upload-dialog"},"Browse for photos"),i.a.createElement("div",{className:"uploadInfo"},i.a.createElement("div",{className:"dataset-info",disabled:!N},i.a.createElement("p",null,"Dataset Info:"),i.a.createElement("p",null,"Name: ",m.length?m:"N/A"),i.a.createElement("p",null,"Number of images: ",o.length>0?o.length:"N/A")),!I&&i.a.createElement("button",{type:"submit",className:"dataset-upload",disabled:!N,onClick:function(){return B.apply(this,arguments)}},"Upload dataset")),I&&i.a.createElement("div",{className:"post-upload"},i.a.createElement("p",null,"Dataset upload complete!"),i.a.createElement("button",{className:"close-modal",onClick:A},"Close"))),!I&&i.a.createElement("button",{className:"cancel",onClick:A},"Cancel")))},j=function(){window.location.replace("/authenticate")},O=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={values:[],createMode:!1},n.showModal=n.showModal.bind(Object(l.a)(n)),n.hideModal=n.hideModal.bind(Object(l.a)(n)),n}return Object(r.a)(a,[{key:"showModal",value:function(){this.setState({createMode:!0})}},{key:"hideModal",value:function(){this.setState({createMode:!1})}},{key:"render",value:function(){return i.a.createElement("div",{className:"form-wrapper"},i.a.createElement(E,{show:this.state.createMode,close:this.hideModal}),i.a.createElement("button",{type:"button",onClick:j},"Login/Logout"),i.a.createElement("br",null),i.a.createElement("div",{className:"form"},i.a.createElement("form",{className:"embedding-form",onSubmit:this.handleSubmit},i.a.createElement("label",{className:"form-category"},i.a.createElement("span",{className:"category-title"},"Dataset:"),i.a.createElement("select",{name:"dataset",id:"dataset"},this.props.userDatasets.map((function(e){return i.a.createElement("option",{className:"form-option",key:e,value:e},e)})))),i.a.createElement("button",{type:"submit",className:"form-submit"},"Submit"))),i.a.createElement("button",{type:"button",className:"create-dataset-button",onClick:this.showModal},"Create a new dataset"))}}]),a}(i.a.Component),y=(a(47),a(1)),N=a(17),k=function e(t){Object(o.a)(this,e),this.width=t,this.height=t},C=function e(t,a,n,i){Object(o.a)(this,e),this.image=t,this.width=t.width*i,this.height=t.height*n,this.numImages=a},M=function e(t,a,n){function i(){var e=700*Math.random();return Math.random()>.5?-e:e}Object(o.a)(this,e),this.x=void 0==t?i():t,this.y=void 0==a?i():a,this.z=void 0==n?-400:n},S=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e,n){var i;Object(o.a)(this,a),i=t.call(this);for(var s=0;s<e.numImages;s++){var c=n[s];i.vertices.push(new y.m(c.x,c.y,c.z),new y.m(c.x+e.image.width,c.y,c.z),new y.m(c.x+e.image.width,c.y+e.image.height,c.z),new y.m(c.x,c.y+e.image.height,c.z));var r=new y.b(i.vertices.length-4,i.vertices.length-3,i.vertices.length-2),l=new y.b(i.vertices.length-4,i.vertices.length-2,i.vertices.length-1);i.faces.push(r,l);var u=s%10*(e.image.width/e.width),m=Math.floor(s/10)*(e.image.height/e.height);i.faceVertexUvs[0].push([new y.l(u,m),new y.l(u+.1,m),new y.l(u+.1,m+.1)]),i.faceVertexUvs[0].push([new y.l(u,m),new y.l(u+.1,m+.1),new y.l(u,m+.1)])}return i}return a}(y.c),D=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).canvasWidth=e.canvasWidth,n.canvasHeight=e.canvasHeight,n}return Object(r.a)(a,[{key:"createCanvas",value:function(){var e=document.createElement("canvas");return this.mount.appendChild(e),e.style.height=this.canvasHeight,e.style.width=this.canvasWidth,e}},{key:"createCamera",value:function(){var e=new y.g(90,2,.1,1e4);return e.position.z=500,e}},{key:"componentDidMount",value:function(){var e=this.createCanvas(),t=new y.n({antialias:!0,canvas:e});t.setSize(800,800);var a=new y.j,n=this.createCamera(),i=new y.h(16777215,.7,0);i.position.set(1,1,100),a.add(i);var s=new N.a(n,t.domElement),c=new y.k;c.setCrossOrigin("anonymous");for(var o=new y.f({map:c.load("/spritesheet")}),r=new k(128),l=new C(r,100,10,10),u=[],m=0;m<l.numImages;++m)u[m]=new M;var h=new S(l,u),d=new y.e(h,o);d.position.set(0,0,0),a.add(d),function e(){t.render(a,n),requestAnimationFrame(e),s.update()}()}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{ref:function(t){return e.mount=t}})}}]),a}(i.a.Component),x=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={datasets:[]},n.fetchUserDatasets=n.fetchUserDatasets.bind(Object(l.a)(n)),n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.fetchUserDatasets()}},{key:"fetchUserDatasets",value:function(){var e=this;fetch("/dataset-names").then((function(e){return e.json()})).then((function(t){e.setState({datasets:t})}))}},{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement(O,{userDatasets:this.state.datasets}),i.a.createElement(D,{canvasWidth:800,canvasHeight:800}))}}]),a}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[18,1,2]]]);
//# sourceMappingURL=main.426f24f3.chunk.js.map